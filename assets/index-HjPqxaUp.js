import{u as y,a as I,b as l,c as q,r as a,f as v,d as N,e as P,j as s,B as E,S as F}from"./index-s5YbRwx2.js";import{L as g,B as M,a as D}from"./bookArticle-Fr08fNM0.js";import{I as T}from"./input-K8DIs24S.js";import{u as V,g as $}from"./useFetch-R6KV7I4d.js";import{P as w}from"./pageLayout-cGIWLDZK.js";import"./addToFavoritesButton-iY4081Fy.js";const A="_Content_11no5_1",G="_List_11no5_6",H="_SearchBar_11no5_12",K="_Search_11no5_12",Q="_Suggests_11no5_26",o={Content:A,List:G,SearchBar:H,Search:K,Suggests:Q};function R(){const d=y(),r=I(),m=l(e=>e.books.bookList),h=l(e=>e.books.isLoading),[S,z]=q(),[t,f]=a.useState(S.get("q")||""),[p,i]=a.useState(!1),[n,u]=a.useState(!1),x={q:V(t,500)||"language:rus",limit:"5"};a.useEffect(()=>{r(v({q:t||"language:rus",limit:10,fields:"key, title"}))},[]);const{data:k={docs:[]},isLoading:O,isFetching:U}=N(x),b=a.useCallback(e=>{f(e)},[t]),c=a.useCallback(()=>{t&&(r(P({title:t,link:`/search?q=${t}`,id:$()})),d(`search/?q=${t}`))},[t]),j=a.useCallback(e=>{e.key==="Enter"&&c()},[c]),_=a.useCallback(()=>{n||i(!1)},[n]),L=a.useCallback(()=>{n||i(!0)},[n]),B=e=>s.jsx(M,{book:e}),C=e=>s.jsx(D,{book:e});return s.jsx("main",{onKeyDown:j,className:o.Content,children:s.jsxs("div",{className:o.List,children:[s.jsxs("div",{className:o.SearchBar,children:[s.jsx(T,{onFocus:L,onBlur:_,onChange:b,type:"text",placeholder:"Поиск",name:"query",currentValue:t}),s.jsx(E,{onClick:c,className:o.Search}),t&&p&&s.jsx("div",{className:o.Suggests,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:s.jsx(g,{list:k.docs,renderItem:C,emptyText:"Нет книг по вашим параметрам"})})]}),h?s.jsx(F,{}):s.jsx(g,{list:m,renderItem:B,emptyText:"Нет книг по вашим параметрам"})]})})}function ts(){return s.jsx(w,{title:"Главная",children:s.jsx(R,{})})}export{ts as default};
