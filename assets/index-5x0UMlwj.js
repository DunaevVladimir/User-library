import{u as g,a as x,r as e,s as E,j as a,B as f}from"./index-s5YbRwx2.js";import{L as j,E as S}from"./error--uAOXepq.js";import{I as u}from"./input-K8DIs24S.js";const b=async r=>{let t=localStorage.getItem("users");if(t){let o=JSON.parse(t).find(n=>n.email===r.email);if(o){if(o.password!==r.password)throw new Error("Неправильно введен пароль")}else throw new Error("Нет пользователя с такой почтой")}else throw new Error("Нет пользователя с такой почтой")};function I(){const r=g(),t=x(),[o,n]=e.useState(""),[s,m]=e.useState({email:"",password:""}),p=e.useCallback(()=>{n("")},[]),i=e.useCallback((l,w)=>{m(h=>({...h,[w]:l}))},[]),c=e.useCallback(()=>{p()},[]),d=e.useCallback(()=>{b({email:s.email,password:s.password}).then(()=>t(E({email:s.email,password:s.password}))).then(()=>r("/")).catch(l=>n(l.message))},[s]);return a.jsxs(j,{onSubmit:d,children:[a.jsx(S,{text:o}),a.jsx(u,{onChange:i,onFocus:c,type:"email",placeholder:"Email",name:"email",currentValue:s.email}),a.jsx(u,{onChange:i,onFocus:c,type:"password",placeholder:"Password",name:"password",currentValue:s.password}),a.jsx(f,{type:"submit",children:"Sign in"})]})}export{I as default};
